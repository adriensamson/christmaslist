{% extends 'KyklydseChristmasListBundle::layout.html.twig' %}

{% block content %}
{% set is_mine = list.owner == current_user %}

<h1>{% trans with {'%name%': list.owner.name}%}Christmas list of %name%{% endtrans %}</h1>

<dl>
{% for item in list.items %}
    {% if not is_mine or item.proposer == current_user %}
    <dt class="list-item-title">
        <strong class="title">{{ item.title }}</strong> <span class="proposer">{% trans with {'%name%': item.proposer} %}proposed by %name%{% endtrans %}</span>
        {% if item.proposer == current_user %}<a href="{{ path('kyklydse_christmaslist_list_edititem', {'list_id': list.id, 'item_id': item.id}) }}">{% trans %}Modify{% endtrans %}</a>{% endif %}
    </dt>
    <dd class="list-item-info">
        {% if item.url %}<a href="{{ item.url }}" class="more-info">{% trans %}More info{% endtrans %}</a>{% endif %}
        <p class="description">{{ item.description }}</p>
        {% if not is_mine %}
        <ul class="comments">
        {% for comment in item.comments %}
            <li>
                <span class="author">{{ comment.author }}</span>
                <span class="comment-content">{{ comment.content }}</span>
            </li>
        {% endfor %}
            <li><a href="{{ path('kyklydse_christmaslist_list_commentitem', {'list_id': list.id, 'item_id': item.id})}}">{% trans %}New comment{% endtrans %}</a></li>
        </ul>
        {% endif %}
    </dd>
    {% endif %}
{% endfor %}
    <dt><a href="{{ path('kyklydse_christmaslist_list_newitem', {'list_id': list.id}) }}">{% trans %}New item{% endtrans %}</a></dt>
</dl>

<p><a href="{{ path('kyklydse_christmaslist_list_index') }}">{% trans %}Back to lists{% endtrans %}</a></p>

{% endblock %}